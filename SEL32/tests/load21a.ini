set env HOST=sel32
set debug -n sel.log
;set env IP=192.168.0.20
set env IP=192.168.1.5
mkdir dsk
set RTC 50
;set CPU V6 4M
set CPU V6 8M
;;set cpu debug=xio;exp
set RTC enable
set iop enable
set iop0 dev=7e00
set dma enable
set dma0 dev=800
set dma0 type=8858
set dma1 type=8858
set coml0 dev=7ee0
set coml0 enable
set coml1 enable
set coml2 enable
set coml3 enable
set coml4 enable
set coml5 enable
set coml6 enable
set coml7 enable
set con enable
set con0 dev=7efc
;;;;;set con1 dev=7edf
;set con1 dev=7efd
;set mta enable <<<<<<< missing
set mta enable
;;set mta debug=cmd;exp;detail
set mta0 dev=1000
;set lpr enable
set comc enable
at comc 4747
set ec enable
set ec mode=2
set ec0 dev=0e00
; set mac address to cause ec to be attached
set ec MAC=08:00:5D:01:01:20
;at lpr lprout
;
deposit BOOTR[7] 42
deposit BOOTR[6] 800
at mta0 tapes/utx21a1.tap
at dma0 -i dsk/21adisk0.dma
at dma1 -i dsk/21adisk1.dma
;;;at ec tap:tap1
at ec tap:tap0
expect "#" continue
expect "#" send "prep /dev/rdk0a\r"; continue
expect "Ready to prep /dev/rdk0a" send "yes\r"; continue
expect "Which option ?" send "2\r"; continue
expect "Warning: some data may be lost on the pack, proceed <no>?" send "yes\r"; continue
expect "Rebuild UTX flaw map from diagnostic flaw map <no>?" send "yes\r"; continue
expect "Please select a drive type:" send "8\r"; continue
expect "#" continue
expect "#" continue
expect "How many spare tracks should be allocated " send "\r"; continue
expect "Do you really want to do this <no>?" send "yes\r"; continue 
expect "Which option ?" send "3\r"; continue
expect "Which option ?" send "2\r"; continue
expect "(a) Starting Cylinder <0>?" send "0\r"; continue
;expect "(a) Size In Blocks <25344> or Ending Cylinder <C65>?" send "c46\r"; continue
;expect "(a) Size In Blocks <25344> or Ending Cylinder <C65>?" send "c65\r"; continue
expect "(a) Size In Blocks <21120> or Ending Cylinder <C54>?" send "c65\r"; continue
expect "(a) Swap <no>?" send "\r"; continue
;expect "(b) Starting Cylinder <66>?" send "46\r"; continue
;expect "(b) Starting Cylinder <66>?" send "66\r"; continue
expect "(b) Starting Cylinder <55>?" send "66\r"; continue
;expect "(b) Size In Blocks <20352> or Ending Cylinder <C98>?" send "c98\r"; continue
;expect "(b) Size In Blocks <20352> or Ending Cylinder <C118>?" send "c118\r"; continue
expect "(b) Size In Blocks <20352> or Ending Cylinder <C118>?" send "c118\r"; continue
expect "(b) Swap <yes>?" send "\r"; continue
expect "(c) Starting Cylinder <0>?" send "\r"; continue
expect "(c) Size In Blocks <271488> or Ending Cylinder <C706>?" send "\r"; continue
expect "(c) Swap <no>?" send "\r"; continue
;expect "(d) Starting Cylinder <119>?" send "98\r"; continue
;expect "(d) Starting Cylinder <119>?" send "119\r"; continue
expect "(d) Starting Cylinder <108>?" send "119\r"; continue
;expect "(d) Size In Blocks <70272> or Ending Cylinder <C280>?" send "c280\r"; continue
;expect "(d) Size In Blocks <70272> or Ending Cylinder <C301>?" send "c301\r"; continue
expect "(d) Size In Blocks <54144> or Ending Cylinder <C259>?" send "c301\r"; continue
expect "(d) Swap <no>?" send "\r"; continue
;expect "(e) Starting Cylinder <302>?" send "280\r"; continue
;expect "(e) Starting Cylinder <302>?" send "302\r"; continue
expect "(e) Starting Cylinder <249>?" send "302\r"; continue
;expect "(e) Size In Blocks <100224> or Ending Cylinder <C540>?" send "C705\r"; continue
;expect "(e) Size In Blocks <100224> or Ending Cylinder <C562>?" send "C706\r"; continue
expect "(e) Size In Blocks <100224> or Ending Cylinder <C562>?" send "C706\r"; continue
expect "(e) Swap <no>?" send "\r"; continue
;expect "(f) Starting Cylinder <563>?" send "0\r"; continue
expect "(f) Starting Cylinder <510>?" send "0\r"; continue
;expect "(f) Size In Blocks <55296> or Ending Cylinder <C143>?" send "0\r"; continue
expect "(f) Size In Blocks <75648> or Ending Cylinder <C196>?" send "0\r"; continue
expect "(f) Swap <no>?" send "\r"; continue
expect "(g) Starting Cylinder <0>?" send "\r"; continue
expect "(g) Size In Blocks <0> or Ending Cylinder <C0>?" send "\r"; continue
expect "(g) Swap <no>?" send "\r"; continue
expect "(h) Starting Cylinder <0>?" send "\r"; continue
expect "(h) Size In Blocks <0> or Ending Cylinder <C0>?" send "\r"; continue
expect "(h) Swap <no>?" send "\r"; continue
expect "Do you really want to do this <no>?" send "yes\r"; continue 
expect "Which option ?" send "0\r"; continue
expect "Which option ?" send "0\r"; continue
expect "#" send "prep /dev/rdk1a\r"; continue
expect "Ready to prep /dev/rdk1a" send "yes\r"; continue
expect "Which option ?" send "2\r"; continue
expect "Warning: some data may be lost on the pack, proceed <no>?" send "yes\r"; continue
expect "Rebuild UTX flaw map from diagnostic flaw map <no>?" send "yes\r"; continue
expect "Please select a drive type:" send "8\r"; continue
expect "#" continue
expect "#" continue
expect "How many spare tracks should be allocated " send "\r"; continue
expect "Do you really want to do this <no>?" send "yes\r"; continue 
expect "Which option ?" send "0\r"; continue
expect "#" send "newfs /dev/dk0a\r"; continue
expect "#" continue
expect "#" send "mount /dev/dk0a /mnt\r"; continue
expect "#" send "cd /mnt\r"; continue
expect "#" send "restore r\r"; continue
expect "#" send "cd /\r"; continue
expect "#" send "umount /dev/dk0a\r"; continue
expect "#" send "halt\r"; continue
bo mta0
deposit BOOTR[7] 2
at mta0 tapes/utx21a2.tap
;at mta0 tapes/utx21b2-3.tap
expect "#" continue
expect "#" send "newfs /dev/dk0d\r"; continue
expect "#" continue
expect "#" send "newfs /dev/dk0e\r"; continue
expect "#" continue
expect "#" send "mount /dev/dk0d /usr.POWERNODE\r"; continue
expect "#" send "rm /restoresymtable\r"; continue
expect "#" send "cd /usr.POWERNODE\r"; continue
expect "#" send "restore rf /dev/rmt0\r"; continue
expect "then enter tape name (default: /dev/rmt0)" at mta0 tapes/utx21a3.tap; send "\r"; continue
expect "#" send "rm /usr.POWERNODE/restoresymtable\r"; continue
expect "#" send "cd /\r"; continue
expect "#" send "/ranlib.sh\r"; continue
expect "#" send 'echo "/dev/dk0e /usr.POWERNODE/src 4.3 rw,noquota 1 3" >>/etc/fstab\r'; continue
expect "echo" continue
;expect "#" send "mount /dev/dk0e /usr.POWERNODE/src\r"; at mta0 tapes/utx21b_src.tap; continue
;expect "#" send "cd /usr.POWERNODE/src\r"; continue
;expect "#" send "tar xf /dev/rmt0\r"; continue
expect "#" send "ed /etc/rc.boot\r"; continue
expect "1522" send "/preen/\r"; continue
expect "#" send "s/#/ /\r.+1\r"; continue
expect "#" continue
expect "echo" send "d\r"; 'expect "\r\n" send "/noname/\r"; continue' ; continue
expect "/bin/hostname noname" send "s/noname/%HOST%/\rw\rq\r"; continue
expect "#" send "ed /etc/hosts\r"; continue
expect "128" send "/sysname/\r"; continue
expect "sysname" continue
expect "sysname" send "d\r"; 'expect "\r\n" send "i\r%IP%    %HOST%\r.\rw\rq\r"; continue'; continue
expect "#" send "ed /etc/rc.local\r" ; continue
expect "3849" send "/echo 'Setup/\r"; continue
expect "#" send "s/# //\r"; 'expect "\r\n" send "/en0 inet/\r"; continue' ; continue
expect "#" continue
expect "#" send "s/# //\r"; 'expect "\r\n" send "w\rq\r"; continue'; continue
expect "#" continue
expect "#" send "newfs /dev/dk1c\r"; continue
expect "#" continue
expect "#" send "mkdir /users\r"; continue
expect "#" send 'echo "/dev/dk1c /users 4.3 rw,noquota 2 1" >>/etc/fstab\r'; continue
expect "echo" continue
expect "#" send "mount /dev/dk1c /users\r"; continue
expect "#" send "df\r"; continue
;expect "#" send "reboot\r"; continue
bo dma0
